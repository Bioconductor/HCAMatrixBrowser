---
title: "HCAMatrixBrowser"
date: "`r BiocStyle::doc_date()`"
vignette: |
  %\VignetteIndexEntry{HCAMatrixBrowser}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
output:
  BiocStyle::html_document:
    toc_float: true
Package: HCAMatrixBrowser
---

# Installation

## Available on Bioconductor

```{r, eval=FALSE}
BiocManager::install("HCABrowser")
BiocManager::install("HCAMatrixBrowser")
```

Load packages:

```{r,include=TRUE,results="hide",message=FALSE,warning=FALSE}
library(HCABrowser)
library(HCAMatrixBrowser)
```

# Constructing a query using the `HCABrowser`

```{r}
hca <- HCABrowser::HCABrowser()

res <- hca %>% filter(
    library_construction_approach.ontology == "EFO:0008931" &
    paired_end == True &
    specimen_from_organism_json.biomaterial_core.ncbi_taxon_id == 9606
)

(bundle_fqids <- res %>% pullBundles)
```

# Downloading HCA expression matrix data

By default, the `loadHCAMatrix` function from `HCAMatrixBrowser` uses
the following:

* URL endpoint: https://matrix.data.humancellatlas.org/v0/matrix
* format: [loom](http://loompy.org/)

```{r}
(lex <- HCAMatrixBrowser::loadHCAMatrix(bundle_fqids))
```

* Column annotations (`colnames`): "CellID"

```{r}
head(colnames(lex))
```

